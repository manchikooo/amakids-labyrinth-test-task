{"ast":null,"code":"const initialState = {\n  matrix: [],\n  matrixSize: 3,\n  startPoint: {\n    dir: '',\n    row: -1,\n    column: -1\n  },\n  endPoint: {\n    dir: '',\n    row: -1,\n    column: -1\n  },\n  possibleMoves: {\n    moves: []\n  },\n  finalPoint: {\n    dir: '',\n    row: -1,\n    column: -1\n  }\n};\nexport const matrixReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case 'CREATE_MATRIX':\n      {\n        let matrix = [];\n\n        for (let i = 0; i < action.payload.tableSize; i++) {\n          matrix.push([]);\n\n          for (let j = 0; j < action.payload.tableSize; j++) {\n            matrix[i].push(j);\n          }\n        }\n\n        return { ...state,\n          matrix\n        };\n      }\n\n    case \"SET_START_COORDINATES\":\n      {\n        const row = Math.round(Math.random() * (action.payload.matrixSize - 1));\n        const column = Math.round(Math.random() * (action.payload.matrixSize - 1));\n        return { ...state,\n          startPoint: { ...state.startPoint,\n            row,\n            column\n          },\n          endPoint: { ...state.startPoint,\n            row,\n            column\n          }\n        };\n      }\n\n    case \"SET_MATRIX_SIZE\":\n      {\n        if (action.payload.size > 5) {\n          return { ...state,\n            matrixSize: 5\n          };\n        } else if (action.payload.size < 2) {\n          return { ...state,\n            matrixSize: 2\n          };\n        } else {\n          return { ...state,\n            matrixSize: action.payload.size\n          };\n        }\n      }\n\n    case \"SET_POSSIBLE_MOVES\":\n      {\n        return { ...state,\n          possibleMoves: { ...state.possibleMoves,\n            moves: action.payload.possibleMoves\n          }\n        };\n      }\n\n    case \"GET_FINAL_POINT\":\n      {\n        return { ...state,\n          finalPoint: action.payload.finalPoint\n        };\n      }\n\n    default:\n      return state;\n  }\n};\nexport const createMatrixAC = tableSize => {\n  return {\n    type: 'CREATE_MATRIX',\n    payload: {\n      tableSize\n    }\n  };\n};\nexport const setMatrixSizeAC = size => {\n  return {\n    type: 'SET_MATRIX_SIZE',\n    payload: {\n      size\n    }\n  };\n};\nexport const setStartCoordinatesAC = matrixSize => {\n  return {\n    type: 'SET_START_COORDINATES',\n    payload: {\n      matrixSize\n    }\n  };\n};\nexport const setPossibleMovesAC = possibleMoves => {\n  return {\n    type: 'SET_POSSIBLE_MOVES',\n    payload: {\n      possibleMoves\n    }\n  };\n};\nexport const setFinalPointAC = finalPoint => {\n  return {\n    type: 'GET_FINAL_POINT',\n    payload: {\n      finalPoint\n    }\n  };\n};","map":{"version":3,"names":["initialState","matrix","matrixSize","startPoint","dir","row","column","endPoint","possibleMoves","moves","finalPoint","matrixReducer","state","action","type","i","payload","tableSize","push","j","Math","round","random","size","createMatrixAC","setMatrixSizeAC","setStartCoordinatesAC","setPossibleMovesAC","setFinalPointAC"],"sources":["/Users/manchiko/amakids-labyrinth-test-task/src/state/reducer.ts"],"sourcesContent":["export type MatrixType = Array<MatrixRowType>\n\nexport type PossibleMovesType = {\n    moves: Array<string>\n}\n\ntype MatrixRowType = Array<number>\n\nexport type PointType = {\n    dir?: string | undefined\n    row: number\n    column: number\n}\n\ntype InitialStateType = {\n    matrix: MatrixType\n    matrixSize: number\n    startPoint: PointType\n    endPoint: PointType\n    finalPoint: PointType\n    possibleMoves: PossibleMovesType\n}\n\nconst initialState: InitialStateType = {\n    matrix: [],\n    matrixSize: 3,\n    startPoint: {\n        dir: '',\n        row: -1,\n        column: -1\n    },\n    endPoint: {\n        dir: '',\n        row: -1,\n        column: -1\n    },\n    possibleMoves: {\n        moves: []\n    },\n    finalPoint: {\n        dir: '',\n        row: -1,\n        column: -1\n    }\n}\n\nexport const matrixReducer = (state: InitialStateType = initialState, action: ActionsType): InitialStateType => {\n    switch (action.type) {\n        case 'CREATE_MATRIX': {\n            let matrix: Array<Array<number>> = []\n            for (let i = 0; i < action.payload.tableSize; i++) {\n                matrix.push([])\n                for (let j = 0; j < action.payload.tableSize; j++) {\n                    matrix[i].push(j)\n                }\n            }\n            return {...state, matrix}\n        }\n        case \"SET_START_COORDINATES\": {\n            const row = Math.round(Math.random() * (action.payload.matrixSize - 1))\n            const column = Math.round(Math.random() * (action.payload.matrixSize - 1))\n            return {\n                ...state,\n                startPoint: {...state.startPoint, row, column},\n                endPoint: {...state.startPoint, row, column}\n            }\n        }\n        case \"SET_MATRIX_SIZE\": {\n            if (action.payload.size > 5) {\n                return {...state, matrixSize: 5}\n            } else if (action.payload.size < 2) {\n                return {...state, matrixSize: 2}\n            } else {\n                return {...state, matrixSize: action.payload.size}\n            }\n        }\n        case \"SET_POSSIBLE_MOVES\": {\n            return {...state, possibleMoves: {...state.possibleMoves, moves: action.payload.possibleMoves}}\n        }\n        case \"GET_FINAL_POINT\": {\n            return {...state, finalPoint: action.payload.finalPoint}\n        }\n        default:\n            return state;\n    }\n}\n\ntype ActionsType =\n    CreateMatrixACType\n    | SetStartCoordinatesACType\n    | SetMatrixSizeACType\n    | SetPossibleMovesACType\n    | SetFinalPointACType\n\ntype CreateMatrixACType = ReturnType<typeof createMatrixAC>\nexport const createMatrixAC = (tableSize: number) => {\n    return {\n        type: 'CREATE_MATRIX',\n        payload: {\n            tableSize\n        }\n    } as const\n}\ntype SetMatrixSizeACType = ReturnType<typeof setMatrixSizeAC>\nexport const setMatrixSizeAC = (size: number) => {\n    return {\n        type: 'SET_MATRIX_SIZE',\n        payload: {\n            size\n        }\n    } as const\n}\n\ntype SetStartCoordinatesACType = ReturnType<typeof setStartCoordinatesAC>\nexport const setStartCoordinatesAC = (matrixSize: number) => {\n    return {\n        type: 'SET_START_COORDINATES',\n        payload: {\n            matrixSize\n        }\n    } as const\n}\ntype SetPossibleMovesACType = ReturnType<typeof setPossibleMovesAC>\nexport const setPossibleMovesAC = (possibleMoves: Array<string>) => {\n    return {\n        type: 'SET_POSSIBLE_MOVES',\n        payload: {\n            possibleMoves\n        }\n    } as const\n}\ntype SetFinalPointACType = ReturnType<typeof setFinalPointAC>\nexport const setFinalPointAC = (finalPoint: PointType) => {\n    return {\n        type: 'GET_FINAL_POINT',\n        payload: {\n            finalPoint\n        }\n    } as const\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}