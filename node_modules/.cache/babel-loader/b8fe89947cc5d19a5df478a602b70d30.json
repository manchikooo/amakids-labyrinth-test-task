{"ast":null,"code":"const initialState = {\n  matrix: [],\n  matrixSize: 3,\n  startPoint: {\n    dir: '',\n    row: -1,\n    column: -1\n  },\n  endPoint: {\n    dir: '',\n    row: -1,\n    column: -1\n  },\n  possibleMoves: []\n};\nexport const matrixReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case 'CREATE_MATRIX':\n      {\n        let matrix = [];\n\n        for (let i = 0; i < action.payload.tableSize; i++) {\n          matrix.push([]);\n\n          for (let j = 0; j < action.payload.tableSize; j++) {\n            matrix[i].push(j);\n          }\n        }\n\n        return { ...state,\n          matrix\n        };\n      }\n\n    case \"SET_START_COORDINATES\":\n      {\n        const row = Math.round(Math.random() * (action.payload.matrixSize - 1));\n        const column = Math.round(Math.random() * (action.payload.matrixSize - 1));\n        return { ...state,\n          startPoint: { ...state.startPoint,\n            row,\n            column\n          },\n          endPoint: { ...state.startPoint,\n            row,\n            column\n          }\n        };\n      }\n\n    case \"SET_MATRIX_SIZE\":\n      {\n        if (action.payload.size > 5) {\n          return { ...state,\n            matrixSize: 5\n          };\n        } else if (action.payload.size < 2) {\n          return { ...state,\n            matrixSize: 2\n          };\n        } else {\n          return { ...state,\n            matrixSize: action.payload.size\n          };\n        }\n      }\n\n    case \"MOVE_UP\":\n      {\n        return { ...state,\n          endPoint: {\n            dir: state.endPoint.dir,\n            row: state.endPoint.row - 1,\n            column: state.endPoint.column\n          }\n        };\n      }\n\n    case \"MOVE_DOWN\":\n      {\n        return { ...state,\n          endPoint: {\n            dir: state.endPoint.dir,\n            row: state.endPoint.row + 1,\n            column: state.endPoint.column\n          }\n        };\n      }\n\n    case \"MOVE_RIGHT\":\n      {\n        return { ...state,\n          endPoint: {\n            dir: state.endPoint.dir,\n            row: state.endPoint.row,\n            column: state.endPoint.column + 1\n          }\n        };\n      }\n\n    case \"MOVE_LEFT\":\n      {\n        return { ...state,\n          endPoint: {\n            dir: state.endPoint.dir,\n            row: state.endPoint.row,\n            column: state.endPoint.column - 1\n          }\n        };\n      }\n\n    default:\n      return state;\n  }\n};\nexport const createMatrixAC = tableSize => {\n  return {\n    type: 'CREATE_MATRIX',\n    payload: {\n      tableSize\n    }\n  };\n};\nexport const setMatrixSizeAC = size => {\n  return {\n    type: 'SET_MATRIX_SIZE',\n    payload: {\n      size\n    }\n  };\n};\nexport const setStartCoordinatesAC = matrixSize => {\n  return {\n    type: 'SET_START_COORDINATES',\n    payload: {\n      matrixSize\n    }\n  };\n};\nexport const moveUpAC = () => {\n  return {\n    type: 'MOVE_UP'\n  };\n};\nexport const moveDownAC = () => {\n  return {\n    type: 'MOVE_DOWN'\n  };\n};\nexport const moveRightAC = () => {\n  return {\n    type: 'MOVE_RIGHT'\n  };\n};\nexport const moveLeftAC = () => {\n  return {\n    type: 'MOVE_LEFT'\n  };\n};","map":{"version":3,"names":["initialState","matrix","matrixSize","startPoint","dir","row","column","endPoint","possibleMoves","matrixReducer","state","action","type","i","payload","tableSize","push","j","Math","round","random","size","createMatrixAC","setMatrixSizeAC","setStartCoordinatesAC","moveUpAC","moveDownAC","moveRightAC","moveLeftAC"],"sources":["/Users/manchiko/amakids-labyrinth-test-task/src/state/reducer.ts"],"sourcesContent":["export type MatrixType = Array<MatrixRowType>\n\ntype MatrixRowType = Array<number>\n\nexport type PointType = {\n    dir?: string | undefined\n    row: number\n    column: number\n}\n\ntype InitialStateType = {\n    matrix: MatrixType\n    matrixSize: number\n    startPoint: PointType\n    endPoint: PointType\n}\n\nconst initialState: InitialStateType = {\n    matrix: [],\n    matrixSize: 3,\n    startPoint: {\n        dir: '',\n        row: -1,\n        column: -1\n    },\n    endPoint: {\n        dir: '',\n        row: -1,\n        column: -1\n    },\n    possibleMoves: []\n}\n\nexport const matrixReducer = (state: InitialStateType = initialState, action: ActionsType): InitialStateType => {\n    switch (action.type) {\n        case 'CREATE_MATRIX': {\n            let matrix: Array<Array<number>> = []\n            for (let i = 0; i < action.payload.tableSize; i++) {\n                matrix.push([])\n                for (let j = 0; j < action.payload.tableSize; j++) {\n                    matrix[i].push(j)\n                }\n            }\n            return {...state, matrix}\n        }\n        case \"SET_START_COORDINATES\": {\n            const row = Math.round(Math.random() * (action.payload.matrixSize - 1))\n            const column = Math.round(Math.random() * (action.payload.matrixSize - 1))\n            return {\n                ...state,\n                startPoint: {...state.startPoint, row, column},\n                endPoint: {...state.startPoint, row, column}\n            }\n        }\n        case \"SET_MATRIX_SIZE\": {\n            if (action.payload.size > 5) {\n                return {...state, matrixSize: 5}\n            } else if (action.payload.size < 2) {\n                return {...state, matrixSize: 2}\n            } else {\n                return {...state, matrixSize: action.payload.size}\n            }\n        }\n        case \"MOVE_UP\": {\n            return {\n                ...state, endPoint: {\n                    dir: state.endPoint.dir,\n                    row: state.endPoint.row - 1,\n                    column: state.endPoint.column\n                }\n            }\n        }\n        case \"MOVE_DOWN\": {\n            return {\n                ...state, endPoint: {\n                    dir: state.endPoint.dir,\n                    row: state.endPoint.row + 1,\n                    column: state.endPoint.column\n                }\n            }\n        }\n        case \"MOVE_RIGHT\": {\n            return {\n                ...state, endPoint: {\n                    dir: state.endPoint.dir,\n                    row: state.endPoint.row,\n                    column: state.endPoint.column + 1\n                }\n            }\n        }\n        case \"MOVE_LEFT\": {\n            return {\n                ...state, endPoint: {\n                    dir: state.endPoint.dir,\n                    row: state.endPoint.row,\n                    column: state.endPoint.column - 1\n                }\n            }\n        }\n        default:\n            return state;\n    }\n}\n\ntype ActionsType =\n    CreateMatrixACType\n    | SetStartCoordinatesACType\n    | SetMatrixSizeACType\n    | MoveUpACType\n    | MoveDownACType\n    | MoveRightACType\n    | MoveLeftACType\n\ntype CreateMatrixACType = ReturnType<typeof createMatrixAC>\nexport const createMatrixAC = (tableSize: number) => {\n    return {\n        type: 'CREATE_MATRIX',\n        payload: {\n            tableSize\n        }\n    } as const\n}\ntype SetMatrixSizeACType = ReturnType<typeof setMatrixSizeAC>\nexport const setMatrixSizeAC = (size: number) => {\n    return {\n        type: 'SET_MATRIX_SIZE',\n        payload: {\n            size\n        }\n    } as const\n}\n\ntype SetStartCoordinatesACType = ReturnType<typeof setStartCoordinatesAC>\nexport const setStartCoordinatesAC = (matrixSize: number) => {\n    return {\n        type: 'SET_START_COORDINATES',\n        payload: {\n            matrixSize\n        }\n    } as const\n}\n\ntype MoveUpACType = ReturnType<typeof moveUpAC>\nexport const moveUpAC = () => {\n    return {\n        type: 'MOVE_UP'\n    } as const\n}\ntype MoveDownACType = ReturnType<typeof moveDownAC>\nexport const moveDownAC = () => {\n    return {\n        type: 'MOVE_DOWN'\n    } as const\n}\ntype MoveRightACType = ReturnType<typeof moveRightAC>\nexport const moveRightAC = () => {\n    return {\n        type: 'MOVE_RIGHT'\n    } as const\n}\ntype MoveLeftACType = ReturnType<typeof moveLeftAC>\nexport const moveLeftAC = () => {\n    return {\n        type: 'MOVE_LEFT'\n    } as const\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}