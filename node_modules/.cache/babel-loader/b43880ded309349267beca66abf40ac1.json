{"ast":null,"code":"const initialState = {\n  matrix: [],\n  matrixSize: 3,\n  startPoint: {\n    dir: '',\n    row: -1,\n    column: -1\n  },\n  possibleMoves: {\n    moves: [],\n    lastCoordinate: {\n      dir: '',\n      row: -1,\n      column: -1\n    }\n  }\n};\nexport const matrixReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case 'CREATE_MATRIX':\n      {\n        let matrix = [];\n\n        for (let i = 0; i < action.payload.tableSize; i++) {\n          matrix.push([]);\n\n          for (let j = 0; j < action.payload.tableSize; j++) {\n            matrix[i].push(j);\n          }\n        }\n\n        return { ...state,\n          matrix\n        };\n      }\n\n    case \"SET_START_POINT\":\n      {\n        const row = Math.round(Math.random() * (action.payload.matrixSize - 1));\n        const column = Math.round(Math.random() * (action.payload.matrixSize - 1));\n        return { ...state,\n          startPoint: { ...state.startPoint,\n            row,\n            column\n          }\n        };\n      }\n\n    case \"SET_MATRIX_SIZE\":\n      {\n        if (action.payload.size > 5) {\n          return { ...state,\n            matrixSize: 5\n          };\n        } else if (action.payload.size < 2) {\n          return { ...state,\n            matrixSize: 2\n          };\n        } else {\n          return { ...state,\n            matrixSize: action.payload.size\n          };\n        }\n      }\n\n    case \"SET_POSSIBLE_MOVES\":\n      {\n        return { ...state,\n          possibleMoves: { ...state.possibleMoves,\n            moves: action.payload.moves,\n            lastCoordinate: action.payload.lastCoordinate\n          }\n        };\n      }\n\n    default:\n      return state;\n  }\n};\nexport const createMatrixAC = tableSize => {\n  return {\n    type: 'CREATE_MATRIX',\n    payload: {\n      tableSize\n    }\n  };\n};\nexport const setMatrixSizeAC = size => {\n  return {\n    type: 'SET_MATRIX_SIZE',\n    payload: {\n      size\n    }\n  };\n};\nexport const setStartPointAC = matrixSize => {\n  return {\n    type: 'SET_START_POINT',\n    payload: {\n      matrixSize\n    }\n  };\n};\nexport const setPossibleMovesAC = _ref => {\n  let {\n    lastCoordinate,\n    moves\n  } = _ref;\n  return {\n    type: 'SET_POSSIBLE_MOVES',\n    payload: {\n      moves,\n      lastCoordinate\n    }\n  };\n};","map":{"version":3,"names":["initialState","matrix","matrixSize","startPoint","dir","row","column","possibleMoves","moves","lastCoordinate","matrixReducer","state","action","type","i","payload","tableSize","push","j","Math","round","random","size","createMatrixAC","setMatrixSizeAC","setStartPointAC","setPossibleMovesAC"],"sources":["/Users/manchiko/amakids-labyrinth-test-task/src/state/reducer.ts"],"sourcesContent":["export type MatrixType = Array<MatrixRowType>\n\nexport type PossibleMovesType = {\n    moves: Array<string>\n    lastCoordinate: PointType\n}\n\ntype MatrixRowType = Array<number>\n\nexport type PointType = {\n    dir?: string | undefined\n    row: number\n    column: number\n}\n\ntype InitialStateType = {\n    matrix: MatrixType\n    matrixSize: number\n    startPoint: PointType\n    possibleMoves: PossibleMovesType\n}\n\nconst initialState: InitialStateType = {\n    matrix: [],\n    matrixSize: 3,\n    startPoint: {\n        dir: '',\n        row: -1,\n        column: -1\n    },\n    possibleMoves: {\n        moves: [],\n        lastCoordinate: {\n            dir: '',\n            row: -1,\n            column: -1\n        }\n    }\n}\n\nexport const matrixReducer = (state: InitialStateType = initialState, action: ActionsType): InitialStateType => {\n    switch (action.type) {\n        case 'CREATE_MATRIX': {\n            let matrix: Array<Array<number>> = []\n            for (let i = 0; i < action.payload.tableSize; i++) {\n                matrix.push([])\n                for (let j = 0; j < action.payload.tableSize; j++) {\n                    matrix[i].push(j)\n                }\n            }\n            return {...state, matrix}\n        }\n        case \"SET_START_POINT\": {\n            const row = Math.round(Math.random() * (action.payload.matrixSize - 1))\n            const column = Math.round(Math.random() * (action.payload.matrixSize - 1))\n            return {\n                ...state,\n                startPoint: {...state.startPoint, row, column},\n            }\n        }\n        case \"SET_MATRIX_SIZE\": {\n            if (action.payload.size > 5) {\n                return {...state, matrixSize: 5}\n            } else if (action.payload.size < 2) {\n                return {...state, matrixSize: 2}\n            } else {\n                return {...state, matrixSize: action.payload.size}\n            }\n        }\n        case \"SET_POSSIBLE_MOVES\": {\n            return {\n                ...state,\n                possibleMoves: {\n                    ...state.possibleMoves,\n                    moves: action.payload.moves,\n                    lastCoordinate: action.payload.lastCoordinate\n                }\n            }\n        }\n        default:\n            return state;\n    }\n}\n\ntype ActionsType =\n    CreateMatrixACType\n    | SetStartCoordinatesACType\n    | SetMatrixSizeACType\n    | SetPossibleMovesACType\n\ntype CreateMatrixACType = ReturnType<typeof createMatrixAC>\nexport const createMatrixAC = (tableSize: number) => {\n    return {\n        type: 'CREATE_MATRIX',\n        payload: {\n            tableSize\n        }\n    } as const\n}\ntype SetMatrixSizeACType = ReturnType<typeof setMatrixSizeAC>\nexport const setMatrixSizeAC = (size: number) => {\n    return {\n        type: 'SET_MATRIX_SIZE',\n        payload: {\n            size\n        }\n    } as const\n}\n\ntype SetStartCoordinatesACType = ReturnType<typeof setStartPointAC>\nexport const setStartPointAC = (matrixSize: number) => {\n    return {\n        type: 'SET_START_POINT',\n        payload: {\n            matrixSize\n        }\n    } as const\n}\ntype SetPossibleMovesACType = ReturnType<typeof setPossibleMovesAC>\nexport const setPossibleMovesAC = ({\n                                       lastCoordinate,\n                                       moves\n                                   }: { lastCoordinate: PointType, moves: Array<string> }) => {\n    return {\n        type: 'SET_POSSIBLE_MOVES',\n        payload: {\n            moves,\n            lastCoordinate\n        }\n    } as const\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}